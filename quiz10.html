<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>JSON: Task 1</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.2/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.2/css/bootstrap.min.css"/>
		
		<style>
        p {
            color  : purple;
            margin : 0.5em 0;
        }



        * {
            box-sizing : border-box;
        }
		</style>
		<link rel="stylesheet" href="./style.css"/>
	</head>
	
	<body>
		<div class="container-flex">
			
			<div class="d-flex justify-content-start p-3">
				<div class="row">
					<div class="col-12">
						<h1>JSON: Task 1</h1>
						<p>Click the button to load the JSON file.</p>
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Load</button>
						<p id="output"></p>
					</div>
				</div>
			</div>
			
			<div class="d-flex justify-content-center p-2">
				<div class="row">
					<div class="col-12">
						<section class="preview"></section>
					</div>
				</div>
			</div>
		</div>
		
		<!-- <script src="main.js" type="text/javascript"></script> -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	</body>
	<script>
      const section = document.querySelector('section');

      let para1 = document.createElement('p');
      let para2 = document.createElement('p');
      let motherInfo = 'The mother cats are called ';
      let kittenInfo;
      const requestURL = 'https://mdn.github.io/learning-area/javascript/oojs/tasks/json/sample.json';

      fetch(requestURL)
          .then(response => response.text())
          .then(text => displayCatInfo(text))

      function displayCatInfo(catString) {
          let total = 0;
          let male = 0;

          const cats = JSON.parse(catString);
          cats.forEach(cat => {
              for (const k of cat.kittens) {
                  total++;
                  (k.gender === 'm') ? male++ : null;
              }

              motherInfo += cat.name + ', ';

          });

          kittenInfo = `There are ${total} kittens in total, ${total - male} of which, are female, and ${male} of which are male.`;
          para1.textContent = motherInfo;
          para2.textContent = kittenInfo;
      }

      section.appendChild(para1);
      section.appendChild(para2);
	</script>

</html>